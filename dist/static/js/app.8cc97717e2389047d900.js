webpackJsonp([1],{"0P1f":function(t,e){},"6d0T":function(t,e){},D13S:function(t,e){},E2UL:function(t,e){},JXwh:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),i=a("kxiW"),r=a.n(i),s={name:"Navbar",data:function(){return{user:null}},created:function(){var t=this;r.a.auth().onAuthStateChanged(function(e){e&&(t.user=e)})}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"deep-purple darken-3"},[e("div",{staticClass:"nav-wrapper container"},[e("ul",[e("li",[e("router-link",{attrs:{to:{name:"Books"}}},[this._v("Книги")])],1),this._v(" "),this.user?e("li",[e("router-link",{attrs:{to:{name:"AddBook"}}},[this._v("Добавить новую")])],1):e("li",{staticClass:"right"},[e("router-link",{attrs:{to:{name:"Login"}}},[this._v("Войти")])],1)])])])},staticRenderFns:[]};var l={name:"App",components:{Navbar:a("VU/8")(s,n,!1,function(t){a("6d0T")},null,null).exports},data:function(){return{}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Navbar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("VfDb")},null,null).exports,u=a("/ocq"),_=a("gBtx"),p=a.n(_),v=a("lHA8"),m=a.n(v),f=(a("881v"),r.a.initializeApp({apiKey:"AIzaSyDOsKgtTmINOlaQ3z60wzX7zHTb2azTcPM",authDomain:"books-9bc9a.firebaseapp.com",databaseURL:"https://books-9bc9a.firebaseio.com",projectId:"books-9bc9a",storageBucket:"books-9bc9a.appspot.com",messagingSenderId:"189708821435",appId:"1:189708821435:web:017edb3f0b7929d4205a9e"}).firestore()),b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"book col xl4 m6 s12"},[a("div",{staticClass:"card deep-purple lighten-4"},[a("button",{staticClass:"material-icons deep-purple-text right book__delete",on:{click:function(e){return e.preventDefault(),t.deleteBook(t.book.id)}}},[t._v("delete")]),t._v(" "),a("div",{staticClass:"card-content"},[a("h3",{staticClass:"card-title book__title"},[t._v(t._s(t.book.title))]),t._v(" "),a("p",{staticClass:"book__description"},[t._v(t._s(t.book.description))])]),t._v(" "),a("div",{staticClass:"card-action"},[a("p",{staticClass:"book__author"},[t._v("Автор: "+t._s(t.book.author))]),t._v(" "),a("p",{staticClass:"book__year"},[t._v(t._s(t.book.year))]),t._v(" "),a("p",{staticClass:"book__read-year deep-purple-text"},[t._v("Прочитано в "+t._s(t.book.readYear))])]),t._v(" "),a("span",{staticClass:"btn-floating halfway-fab btn white"},[a("router-link",{attrs:{to:{name:"EditBook",params:{id:t.book.id}}}},[a("i",{staticClass:"material-icons deep-purple-text"},[t._v("edit")])])],1)])])},staticRenderFns:[]};var h={name:"Books",components:{Book:a("VU/8")({name:"Book",props:["book"],data:function(){return{}},methods:{deleteBook:function(t){this.$emit("delete",{id:this.book.id})}}},b,!1,function(t){a("D13S")},null,null).exports},data:function(){return{books:[],filteredBooks:[],readYears:null}},created:function(){var t=this;this.readYears=new m.a,f.collection("books").get().then(function(e){e.forEach(function(e){var a=e.data();a.id=e.id,t.books.push(a),t.readYears.add(a.readYear)})}),this.filteredBooks=this.books},methods:{deleteBook:function(t){var e=this;f.collection("books").doc(t.id).delete().then(function(){e.books=e.books.filter(function(e){return e.id!=t.id})})},filterBooks:function(t){document.querySelectorAll(".darken-1").forEach(function(t){return t.className=t.className.replace("darken","lighten")}),t.target.className=t.target.className.replace("lighten","darken"),p()(t.target.innerText)?this.filteredBooks=this.books.filter(function(e){return e.readYear==t.target.innerText}):this.filteredBooks=this.books}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"all-books container"},[a("h1",[t._v("Все книги")]),t._v(" "),a("div",{staticClass:"row switch"},[a("button",{staticClass:"deep-purple lighten-1 btn switch__btn",on:{click:t.filterBooks}},[t._v("Все")]),t._v(" "),t._l(t.readYears,function(e,o){return a("button",{key:o,staticClass:"deep-purple lighten-1 btn switch__btn",on:{click:t.filterBooks}},[t._v(t._s(e))])})],2),t._v(" "),a("div",{staticClass:"row books-row"},t._l(t.filteredBooks,function(e){return a("Book",{key:e.id,attrs:{book:e},on:{delete:t.deleteBook}})}),1)])},staticRenderFns:[]};var g=a("VU/8")(h,k,!1,function(t){a("0P1f")},null,null).exports,C={name:"AddBook",data:function(){return{title:null,description:null,author:null,year:null,readYear:null,feedback:!1}},methods:{addBook:function(){var t=this;this.title?(f.collection("books").add({title:this.title,description:this.description,author:this.author,year:this.year,readYear:this.readYear}).then(function(){t.$router.push({name:"Books"})}).catch(function(t){return console.log(t)}),this.feedback=!1):this.feedback=!0}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("h1",{staticClass:"center"},[t._v("Добавить книгу")]),t._v(" "),a("form",{staticClass:"add",on:{submit:function(e){return e.preventDefault(),t.addBook(e)}}},[a("div",{staticClass:"add__field"},[a("label",{attrs:{for:"add__title"}},[t._v("Название")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"add__title",type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"add__field"},[a("label",{attrs:{for:"add__descr"}},[t._v("Описание")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"materialize-textarea",attrs:{id:"add__descr"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"add__field"},[a("label",{attrs:{for:"add__author"}},[t._v("Автор")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{id:"add__author",type:"text"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"add__field"},[a("label",{attrs:{for:"add__year"}},[t._v("Год выпуска")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],attrs:{id:"add__year",type:"text"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"add__field"},[a("label",{attrs:{for:"add__year"}},[t._v("Прочитано в")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.readYear,expression:"readYear"}],attrs:{id:"add__year",type:"text"},domProps:{value:t.readYear},on:{input:function(e){e.target.composing||(t.readYear=e.target.value)}}})]),t._v(" "),t.feedback?a("p",{staticClass:"feedback center"},[t._v("Заполни хотя бы название, камон")]):t._e(),t._v(" "),a("button",{staticClass:"btn-large deep-purple darken-3 add__btn"},[t._v("Добавить")])])])},staticRenderFns:[]};var w=a("VU/8")(C,y,!1,function(t){a("RqWu")},null,null).exports,x={name:"EditBook",data:function(){return{book:null,feedback:!1}},created:function(){var t=this;f.collection("books").doc(this.$route.params.id).get().then(function(e){t.book=e.data(),t.book.id=e.id})},methods:{editBook:function(){var t=this;this.book.title?(f.collection("books").doc(this.book.id).update({title:this.book.title,description:this.book.description,author:this.book.author,year:this.book.year,readYear:this.book.readYear}).then(function(){t.$router.push({name:"Books"})}).catch(function(t){return console.log(t)}),this.feedback=!1):this.feedback=!0}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("h1",{staticClass:"center"},[t._v("Редактировать книгу")]),t._v(" "),a("form",{staticClass:"edit",on:{submit:function(e){return e.preventDefault(),t.editBook(e)}}},[a("div",{staticClass:"edit__field"},[a("label",{attrs:{for:"edit__title"}},[t._v("Название")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.title,expression:"book.title"}],attrs:{id:"edit__title",type:"text"},domProps:{value:t.book.title},on:{input:function(e){e.target.composing||t.$set(t.book,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"edit__field"},[a("label",{attrs:{for:"edit__descr"}},[t._v("Описание")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.description,expression:"book.description"}],staticClass:"materialize-textarea",attrs:{id:"edit__descr"},domProps:{value:t.book.description},on:{input:function(e){e.target.composing||t.$set(t.book,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"edit__field"},[a("label",{attrs:{for:"edit__author"}},[t._v("Автор")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.author,expression:"book.author"}],attrs:{id:"edit__author",type:"text"},domProps:{value:t.book.author},on:{input:function(e){e.target.composing||t.$set(t.book,"author",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"edit__field"},[a("label",{attrs:{for:"edit__year"}},[t._v("Год выпуска")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.year,expression:"book.year"}],attrs:{id:"edit__year",type:"text"},domProps:{value:t.book.year},on:{input:function(e){e.target.composing||t.$set(t.book,"year",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"add__field"},[a("label",{attrs:{for:"add__year"}},[t._v("Прочитано в")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.readYear,expression:"book.readYear"}],attrs:{id:"add__year",type:"text"},domProps:{value:t.book.readYear},on:{input:function(e){e.target.composing||t.$set(t.book,"readYear",e.target.value)}}})]),t._v(" "),t.feedback?a("p",{staticClass:"feedback center"},[t._v("Заполни хотя бы название, камон")]):t._e(),t._v(" "),a("button",{staticClass:"btn-large deep-purple darken-3 edit__btn"},[t._v("Изменить")])])])},staticRenderFns:[]};var N=a("VU/8")(x,B,!1,function(t){a("E2UL")},null,null).exports,Y={name:"Login",data:function(){return{email:null,password:null,feedback:!1}},methods:{logIn:function(){var t=this;this.email&&this.password?(r.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.$router.push({name:"Books"})}).catch(function(e){return t.feedback=!0}),this.feedback=!1):this.feedback=!0}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("h1",{staticClass:"center"},[t._v("Вход")]),t._v(" "),a("form",{staticClass:"login",on:{submit:function(e){return e.preventDefault(),t.logIn(e)}}},[a("div",{staticClass:"login__field"},[a("label",{attrs:{for:"login__email"}},[t._v("E-mail")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"login__email",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"login__field"},[a("label",{attrs:{for:"login__pass"}},[t._v("Пароль")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"login__pass",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.feedback?a("p",{staticClass:"feedback center"},[t._v("Заполни форму нормально")]):t._e(),t._v(" "),a("button",{staticClass:"btn-large deep-purple darken-3 login__btn"},[t._v("Войти")])])])},staticRenderFns:[]};var P=a("VU/8")(Y,E,!1,function(t){a("JXwh")},null,null).exports;o.a.use(u.a);var $=new u.a({mode:"history",routes:[{path:"/",name:"Books",component:g},{path:"/add",name:"AddBook",component:w,meta:{requiresAuth:!0}},{path:"/edit/:id",name:"EditBook",component:N,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:P}]});$.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?r.a.auth().currentUser?a():a({name:"Login"}):a()});var A=$;o.a.config.productionTip=!1,new o.a({el:"#app",router:A,components:{App:c},template:"<App/>"})},RqWu:function(t,e){},VfDb:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8cc97717e2389047d900.js.map